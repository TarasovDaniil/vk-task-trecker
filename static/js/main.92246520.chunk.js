(this["webpackJsonpvk-task-trecker"]=this["webpackJsonpvk-task-trecker"]||[]).push([[0],{140:function(t,e,c){},146:function(t,e,c){},147:function(t,e,c){},148:function(t,e,c){},149:function(t,e,c){"use strict";c.r(e);var n=c(0),r=c(18),i=c.n(r),a=c(19),o=c.n(a),s=c(6),u=c(15),f=(c(139),c(36)),j=(c(140),c(8)),l="TOTAL_BLOCK_SIZE",b="CHANGE_POSITION",m="SET_POSITION",O="SET_MODE",h=function(t,e){return{type:b,position:t,matrix:e,mode:"move"}},g=function(t){return{type:O,mode:t}},d=c(5),x=function(){var t=Object(n.useState)(Object(f.a)(Array(8)).map((function(){return Array(8).fill({state:"empty",color:"#c4c4c4"})}))),e=Object(s.a)(t,2),c=e[0],r=e[1],i=Object(n.useRef)(),a=Object(n.useState)(0),o=Object(s.a)(a,2),u=o[0],b=o[1],m=Object(n.useState)(0),O=Object(s.a)(m,2),h=O[0],x=O[1],p=Object(j.c)((function(t){return t.game.position})),v=Object(j.c)((function(t){return t.game.matrix})),S=Object(j.c)((function(t){return t.game.color})),w=Object(j.c)((function(t){return t.game.mode})),y=Object(j.b)(),E=function(t){return t.map((function(t){return t.map((function(t){return"hover"===t.state?{state:"empty",color:"#c4c4c4"}:t}))}))};return Object(n.useEffect)((function(){var t=i.current.clientWidth,e=.9*t/8,c=.1*t/8;b(e),x(c),y(function(t,e){return{type:l,size:t,margin:e}}(e,c))}),[]),Object(n.useEffect)((function(){if(v&&p){var t=i.current.getBoundingClientRect(),e=Math.round((p[0]-t.x)/(u+h)),n=Math.round((p[1]-t.y)/(u+h)),a=E(c),o=!1;v.forEach((function(t,c){var r=a[n+c];r?t.forEach((function(t,i){var s=r[e+i];s?t&&("move"===w?"empty"===s.state?a[n+c][e+i]={state:"hover",color:"#717171"}:o=!0:"end"===w&&("empty"===s.state?a[n+c][e+i]={state:"fill",color:S}:o=!0)):o=!0})):o=!0})),o?r(E(c)):"end"===w?(r(function(t){var e=[],c=[];return t.forEach((function(t,n){e[n]=!0,t.forEach((function(t,r){e[n]=e[n]&&"fill"===t.state,void 0!==c[r]?c[r]=c[r]&&"fill"===t.state:c[r]="fill"===t.state}))})),t.map((function(t,n){return t.map((function(t,r){return e[n]||c[r]?{state:"empty",color:"#c4c4c4"}:t}))}))}(a)),y(g("change"))):r(a)}}),[p,v]),Object(d.jsx)("div",{ref:i,className:"game-matrix",children:c.map((function(t,e){return Object(d.jsx)("div",{className:"str-blocks",style:{marginTop:h},children:t.map((function(t,e){return Object(d.jsx)("div",{className:"block",style:{marginLeft:h,width:u,height:u,background:t.color,boxShadow:"fill"===t.state?"2px 2px 14px rgba(0, 0, 0, 0.5)":null}},e)}))},e)}))})},p=c(16),v=[{matrix:[[!0]]},{matrix:[[!0,!0]]},{matrix:[[!0],[!0]]},{matrix:[[!0,!0,!0]]},{matrix:[[!0],[!0],[!0]]},{matrix:[[!0,!0,!0,!0]]},{matrix:[[!0],[!0],[!0],[!0]]},{matrix:[[!0,!0],[!0,!0]]},{matrix:[[!0,!0,!0],[!0,!1,!1],[!0,!1,!1]]},{matrix:[[!0,!0,!0],[!1,!1,!0],[!1,!1,!0]]},{matrix:[[!0,!1,!1],[!0,!1,!1],[!0,!0,!0]]},{matrix:[[!1,!1,!0],[!1,!1,!0],[!0,!0,!0]]},{matrix:[[!0,!0],[!0,!1]]},{matrix:[[!0,!0],[!1,!0]]},{matrix:[[!0,!1],[!0,!0]]},{matrix:[[!1,!0],[!0,!0]]}],S=["#3f8ae0","#4bb34b","#ffa000","#735ce6","#ff3347","#792ec0"],w=(c(146),function(t){var e=t.figure,c=t.color,r=t.style,i=t.isShow,a=t.index,o=Object(n.useState)(v[e]),f=Object(s.a)(o,2),l=f[0],b=f[1],O=Object(n.useState)(S[c]),g=Object(s.a)(O,2),x=g[0],p=g[1],w=Object(n.useState)(!1),y=Object(s.a)(w,2),E=y[0],k=y[1],N=Object(n.useState)(0),R=Object(s.a)(N,2),T=R[0],C=R[1],I=Object(j.c)((function(t){return t.game.size})),z=Object(j.c)((function(t){return t.game.margin})),L=Object(n.useState)(0),M=Object(s.a)(L,2),P=M[0],A=M[1],B=Object(n.useState)([0,0]),_=Object(s.a)(B,2),W=_[0],X=_[1],Y=Object(n.useState)([0,0]),J=Object(s.a)(Y,2),K=J[0],U=J[1],D=Object(n.useState)(0),G=Object(s.a)(D,2),H=G[0],V=G[1],Z=Object(n.useState)(0),q=Object(s.a)(Z,2),F=q[0],Q=q[1],$=Object(n.useState)(null),tt=Object(s.a)($,2),et=tt[0],ct=tt[1],nt=Object(j.b)();Object(n.useRef)();return Object(n.useEffect)((function(){b(v[e]),p(S[c])}),[e,c]),Object(n.useEffect)((function(){var t=l.matrix.length>l.matrix[0].length?l.matrix.length:l.matrix[0].length,e=l.matrix.length;if(E)C(I),A(z),V(z*(l.matrix[0].length-1)+I*l.matrix[0].length),Q(z*(e-1)+I*e);else{console.log(t,r);var c=t>1?.9*r.width/t:r.width,n=t>1?.1*r.width/t-1:0,i=c>I?I:c,a=n>z?z:n;C(i),A(a),V(a*(l.matrix[0].length-1)+i*l.matrix[0].length),Q(a*(e-1)+i*e)}}),[l,r,I,z,E]),Object(n.useEffect)((function(){console.log(K,W)}),[K,W]),Object(n.useEffect)((function(){ct(l.matrix.map((function(t,e){return Object(d.jsx)("div",{className:"figure-str",style:{marginTop:0!==e?P:0,height:T,width:H},children:t.map((function(t,e){return Object(d.jsx)("div",{className:"figure-block",style:{background:t?x:"transparent",marginLeft:0!==e?P:0,marginRight:t.length-1===e?P:0,width:T,height:T,boxShadow:t?"2px 2px 14px rgba(0, 0, 0, 0.5)":null}},e)}))},e)})))}),[T,P,H,F]),Object(d.jsx)("div",{className:"area-figure",style:r,children:i&&Object(d.jsx)(u.g,{className:"touch-figure"+(E?" touch-active":""),getRootRef:function(t){if(t){var e=t.getBoundingClientRect();console.log(t.getBoundingClientRect()),U([e.x,e.y])}},onMove:function(t){X([K[0]+t.shiftX-H/2,K[1]+t.shiftY-F/2]),nt(h([K[0]+t.shiftX-H/2,K[1]+t.shiftY-F/2],l.matrix))},onEnd:function(t){k(!1),nt(function(t,e,c,n){return{type:m,position:t,matrix:e,color:c,index:n,mode:"end"}}([K[0]+t.shiftX-H/2,K[1]+t.shiftY-F/2],l.matrix,x,a)),console.log("end")},onStart:function(t){X([K[0],K[1]]),nt(h([K[0],K[1]],l.matrix)),console.log("start",[K[0],K[1]]),k(!0)},style:{width:H,height:F,position:E?"fixed":"absolute",transform:E?"translate(".concat(W[0],"px, ").concat(W[1],"px)"):"translate(-50%, -50%)",top:E?0:"50%",left:E?0:"50%"},children:et})})}),y=(c(147),function(){var t=Object(n.useState)(0),e=Object(s.a)(t,2),c=e[0],r=e[1],i=Object(n.useState)(0),a=Object(s.a)(i,2),o=a[0],u=a[1],f=Object(n.useState)([]),l=Object(s.a)(f,2),b=l[0],m=l[1],O=Object(j.c)((function(t){return t.game.index})),h=Object(j.c)((function(t){return t.game.mode})),x=Object(n.useState)(null),v=Object(s.a)(x,2),S=(v[0],v[1],Object(n.useRef)()),y=Object(j.b)(),E=function(t){return Math.floor(Math.random()*t)};return Object(n.useEffect)((function(){var t=S.current.clientWidth;r(.9*t/3),u(.1*t/4),m([{figure:E(16),color:E(6),isShow:!0},{figure:E(16),color:E(6),isShow:!0},{figure:E(16),color:E(6),isShow:!0}])}),[]),Object(n.useEffect)((function(){if(console.log("generator",h,O),"change"===h){var t=b;t[O]=Object(p.a)(Object(p.a)({},t[O]),{},{isShow:!1}),!function(t){var e=!1;return t.forEach((function(t){e=e||t.isShow})),e}(t)?m([{figure:E(16),color:E(6),isShow:!0},{figure:E(16),color:E(6),isShow:!0},{figure:E(16),color:E(6),isShow:!0}]):(m(t),console.log(t)),y(g("start"))}}),[h,O]),Object(d.jsx)("div",{className:"area-generator",ref:S,children:b.map((function(t,e){return t.isShow?Object(d.jsx)(w,{index:e,isShow:t.isShow,figure:t.figure,color:t.color,style:{width:c,height:c,marginLeft:o,marginRight:t.length-1===e?o:0}},e):Object(d.jsx)("div",{className:"area-figure",style:{width:c,height:c,marginLeft:o,marginRight:t.length-1===e?o:0}})}))})}),E=function(t){var e=t.id;t.go,t.fetchedUser;return Object(d.jsxs)(u.c,{id:e,children:[Object(d.jsx)(u.d,{children:"Example"}),Object(d.jsx)(x,{}),Object(d.jsx)(y,{})]})},k=c.p+"static/media/persik.ae9f0072.png",N=(c(148),function(t){return Object(d.jsxs)(u.c,{id:t.id,children:[Object(d.jsx)(u.d,{left:Object(d.jsx)(u.e,{onClick:t.go,"data-to":"home"}),children:"Persik"}),Object(d.jsx)("img",{className:"Persik",src:k,alt:"Persik The Cat"})]})}),R=function(){var t=Object(n.useState)("home"),e=Object(s.a)(t,2),c=e[0],r=e[1],i=Object(n.useState)(null),a=Object(s.a)(i,2),o=a[0],f=(a[1],Object(n.useState)(Object(d.jsx)(u.f,{size:"large"}))),j=Object(s.a)(f,2);j[0],j[1];Object(n.useEffect)((function(){}),[]);var l=function(t){r(t.currentTarget.dataset.to)};return Object(d.jsx)(u.a,{children:Object(d.jsx)(u.b,{children:Object(d.jsxs)(u.h,{activePanel:c,popout:null,children:[Object(d.jsx)(E,{id:"home",fetchedUser:o,go:l}),Object(d.jsx)(N,{id:"persik",go:l})]})})})},T=c(24),C={size:0,margin:0,position:[0,0],matrix:[],color:"#c4c4c4",mode:"start",index:-1};var I=Object(T.a)({game:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(p.a)(Object(p.a)({},t),{},{size:e.size,margin:e.margin});case b:return Object(p.a)(Object(p.a)({},t),{},{position:e.position,matrix:e.matrix,mode:e.mode});case m:return Object(p.a)(Object(p.a)({},t),{},{position:e.position,matrix:e.matrix,color:e.color,index:e.index,mode:e.mode});case O:return Object(p.a)(Object(p.a)({},t),{},{mode:e.mode});default:return t}}}),z=Object(T.b)(I);o.a.send("VKWebAppInit"),i.a.render(Object(d.jsx)(j.a,{store:z,children:Object(d.jsx)(R,{})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.92246520.chunk.js.map